generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Event {
  id              Int         @id @default(autoincrement())
  eventType       EventType
  data            Json
  blockHeight     String
  transactionHash String
  logIndex        Int
  createdAt       DateTime    @default(now())

  @@unique([blockHeight, transactionHash, logIndex])
}

enum EventType {
  // Ethereum events
  GRANT_ROLE
  REVOKE_ROLE
}

model User {
  id         Int       @id @default(autoincrement())
  address    String    @unique
  isAdmin    Boolean   @default(false)
  isMinter   Boolean   @default(false)
  isRedeemer Boolean   @default(false)
  createdAt  DateTime  @default(now())
}

model Utils {
  id                  Int    @id @default(autoincrement())
  ethereumBlockHeight String
}
